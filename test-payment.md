# 支付功能测试指南

## 测试环境准备

1. **启动后端服务**
   ```bash
   cd elder_care/server
   npm run dev
   ```

2. **启动前端服务**
   ```bash
   cd elder_care/apps/family-app
   npm run dev
   ```

## 测试步骤

### 1. 测试支付功能

1. **访问订单页面**
   - 打开浏览器访问: `http://localhost:5174`
   - 登录用户账号
   - 进入"订单"页面

2. **测试支付按钮**
   - 找到状态为"待支付"的订单
   - 点击"立即支付"按钮
   - 验证是否跳转到支付页面

3. **测试支付流程**
   - 在支付页面查看订单信息
   - 点击"立即支付 ¥160"按钮
   - 观察支付结果（成功/失败）
   - 验证成功后是否自动跳转回订单页面

### 2. 测试退款功能

1. **测试退款按钮**
   - 在订单页面找到状态为"已取消"的订单
   - 点击"申请退款"按钮
   - 验证是否跳转到退款页面

2. **测试退款流程**
   - 在退款页面选择退款原因
   - 点击"确认申请退款"按钮
   - 观察退款申请结果
   - 验证成功后是否自动跳转回订单页面

### 3. 测试预约护工功能

1. **测试预约按钮**
   - 在订单页面点击右下角的"+"按钮
   - 验证是否跳转到护工列表页面

2. **测试预约流程**
   - 在护工列表页面选择护工
   - 点击"预约"按钮
   - 验证是否跳转到订单确认页面

## 预期结果

### 支付功能
- ✅ 支付页面正常显示
- ✅ 支付按钮可点击
- ✅ 支付结果正确显示
- ✅ 自动跳转功能正常

### 退款功能
- ✅ 退款页面正常显示
- ✅ 退款原因选择正常
- ✅ 退款申请结果正确显示
- ✅ 自动跳转功能正常

### 预约功能
- ✅ 护工列表正常显示
- ✅ 预约按钮可点击
- ✅ 跳转到订单确认页面

## 常见问题

### 1. 支付失败
- 检查后端服务是否正常运行
- 检查网络连接是否正常
- 查看浏览器控制台是否有错误信息

### 2. 页面跳转失败
- 检查路由配置是否正确
- 检查前端服务是否正常运行
- 查看浏览器控制台是否有错误信息

### 3. API调用失败
- 检查后端API是否正常响应
- 检查用户认证是否有效
- 查看网络请求是否成功

## 调试技巧

### 前端调试
```javascript
// 在浏览器控制台中查看支付服务
console.log(PaymentService);

// 查看当前路由状态
console.log(window.location.pathname);
```

### 后端调试
```javascript
// 在支付路由中添加日志
console.log('支付请求:', req.body);
console.log('支付响应:', response);
```

## 性能测试

### 支付响应时间
- 正常情况: < 2秒
- 网络延迟: < 5秒

### 页面加载时间
- 支付页面: < 1秒
- 退款页面: < 1秒
- 护工列表: < 1秒

## 兼容性测试

### 浏览器兼容性
- Chrome (推荐)
- Firefox
- Safari
- Edge

### 设备兼容性
- 桌面端
- 移动端
- 平板端
